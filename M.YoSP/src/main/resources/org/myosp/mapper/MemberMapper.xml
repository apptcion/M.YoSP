<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="org.myosp.mapper.MemberMapper">
		<resultMap type="org.myosp.domain.MemberDTO" id="memberMap">
			<id property="user_id" column="user_id" />
			 <result property="username" column="userName" />
			 <result property="password" column="password" />
			 <result property="email" column="email" />
			 <result property="enabled" column="enabled" />
			 <collection property="authList" resultMap="authMap">
			 </collection>
		</resultMap>
		
		<resultMap type="org.myosp.domain.MemberAuthDTO" id="authMap">
			<result property="username" column="userName" />
			<result property="authority" column="authority" />
		</resultMap>
	
		<select id="read" resultMap="memberMap">
			SELECT user_id, mem.userName ,password, email, enabled ,authority from 
			member mem LEFT OUTER JOIN author_member auth on mem.userName = auth.userName WHERE mem.userName=#{userName}
			
		</select>

	
	</mapper>